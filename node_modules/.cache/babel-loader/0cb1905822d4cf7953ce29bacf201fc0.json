{"ast":null,"code":"var _jsxFileName = \"/Users/shaktishah/Desktop/Coding Temple/2022/week_07/01/hw1/src/contexts/DataProvider.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\nimport axios from 'axios';\nimport { firebaseApp } from '../firebase/config';\nimport { collectionGroup, getDocs, query, getFirestore } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const DataContext = /*#__PURE__*/createContext(); // To make your own React hook\n\nexport function useData() {\n  _s();\n\n  return useContext(DataContext);\n}\n\n_s(useData, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nconst DataProvider = props => {\n  _s2();\n\n  const [posts, setPosts] = useState([]);\n  const [messages, setMessages] = useState([]);\n  const db = getFirestore();\n  const getMessages = useCallback(async () => {\n    // const q = query( collection ( db, 'messages') ), orderBy( 'dateCreated', 'desc' ) );\n    const q = query(collectionGroup(db, 'messages'));\n    let newMessages = [];\n    const querySnapshot = await getDocs(q);\n    querySnapshot.forEach(doc => {\n      newMessages.push({\n        id: doc.id,\n        ...doc.data()\n      });\n      setMessages(newMessages); // console.log(doc.data())\n\n      return querySnapshot;\n    });\n  }, [db]);\n  useEffect(() => {\n    axios.get(`https://fakebook-january-derek.herokuapp.com/api/v1/blog`).then(res => setPosts(res.data));\n    getMessages();\n  }, [getMessages]);\n  useEffect(() => {\n    console.log(firebaseApp);\n  }, []);\n  const values = {\n    posts: posts,\n    messages: messages\n  };\n  return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n    value: values,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(DataProvider, \"CZATzsz5IvsdRu7hIeYq4sSigiI=\");\n\n_c = DataProvider;\nexport default DataProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"sources":["/Users/shaktishah/Desktop/Coding Temple/2022/week_07/01/hw1/src/contexts/DataProvider.js"],"names":["React","createContext","useContext","useEffect","useState","useCallback","axios","firebaseApp","collectionGroup","getDocs","query","getFirestore","DataContext","useData","DataProvider","props","posts","setPosts","messages","setMessages","db","getMessages","q","newMessages","querySnapshot","forEach","doc","push","id","data","get","then","res","console","log","values","children"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,SAA3C,EAAsDC,QAAtD,EAAgEC,WAAhE,QAAmF,OAAnF;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,SAASC,eAAT,EAA0BC,OAA1B,EAAmCC,KAAnC,EAA0CC,YAA1C,QAA8D,oBAA9D;;AAEA,OAAO,MAAMC,WAAW,gBAAGX,aAAa,EAAjC,C,CAEP;;AACA,OAAO,SAASY,OAAT,GAAmB;AAAA;;AACtB,SAAOX,UAAU,CAAEU,WAAF,CAAjB;AACH;;GAFeC,O;;AAIhB,MAAMC,YAAY,GAAIC,KAAD,IAAW;AAAA;;AAE5B,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACc,QAAD,EAAWC,WAAX,IAA0Bf,QAAQ,CAAC,EAAD,CAAxC;AAEA,QAAMgB,EAAE,GAAGT,YAAY,EAAvB;AAEA,QAAMU,WAAW,GAAGhB,WAAW,CAC3B,YAAY;AACR;AACA,UAAMiB,CAAC,GAAGZ,KAAK,CAAEF,eAAe,CAAEY,EAAF,EAAM,UAAN,CAAjB,CAAf;AACA,QAAIG,WAAW,GAAG,EAAlB;AACA,UAAMC,aAAa,GAAG,MAAMf,OAAO,CAAEa,CAAF,CAAnC;AACAE,IAAAA,aAAa,CAACC,OAAd,CAAuBC,GAAG,IAAI;AAC1BH,MAAAA,WAAW,CAACI,IAAZ,CAAiB;AACbC,QAAAA,EAAE,EAAEF,GAAG,CAACE,EADK;AAEb,WAAGF,GAAG,CAACG,IAAJ;AAFU,OAAjB;AAIAV,MAAAA,WAAW,CAAEI,WAAF,CAAX,CAL0B,CAM1B;;AACA,aAAOC,aAAP;AACH,KARD;AASH,GAf0B,EAgB3B,CAACJ,EAAD,CAhB2B,CAA/B;AAmBAjB,EAAAA,SAAS,CAAC,MAAM;AACdG,IAAAA,KAAK,CACFwB,GADH,CACQ,0DADR,EAEGC,IAFH,CAESC,GAAD,IAASf,QAAQ,CAACe,GAAG,CAACH,IAAL,CAFzB;AAGER,IAAAA,WAAW;AACd,GALQ,EAKN,CAAEA,WAAF,CALM,CAAT;AAMAlB,EAAAA,SAAS,CAAC,MAAM;AACd8B,IAAAA,OAAO,CAACC,GAAR,CAAY3B,WAAZ;AACD,GAFQ,EAEN,EAFM,CAAT;AAIA,QAAM4B,MAAM,GAAG;AACXnB,IAAAA,KAAK,EAAGA,KADG;AAEXE,IAAAA,QAAQ,EAAGA;AAFA,GAAf;AAKA,sBACI,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAKiB,MAAhC;AAAA,cACKpB,KAAK,CAACqB;AADX;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH,CA9CD;;IAAMtB,Y;;KAAAA,Y;AAgDN,eAAeA,YAAf","sourcesContent":["import React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\nimport axios from 'axios';\nimport { firebaseApp } from '../firebase/config';\nimport { collectionGroup, getDocs, query, getFirestore } from 'firebase/firestore';\n\nexport const DataContext = createContext()\n\n// To make your own React hook\nexport function useData() {\n    return useContext( DataContext )\n}\n\nconst DataProvider = (props) => {\n    \n    const [posts, setPosts] = useState([]);\n    const [messages, setMessages] = useState([]);\n\n    const db = getFirestore()\n\n    const getMessages = useCallback(\n        async () => {\n            // const q = query( collection ( db, 'messages') ), orderBy( 'dateCreated', 'desc' ) );\n            const q = query( collectionGroup (db, 'messages') )\n            let newMessages = [];\n            const querySnapshot = await getDocs( q )\n            querySnapshot.forEach( doc => {\n                newMessages.push({\n                    id: doc.id,\n                    ...doc.data()\n                })\n                setMessages( newMessages )\n                // console.log(doc.data())\n                return querySnapshot;\n            })\n        },\n        [db]\n    )\n    \n    useEffect(() => {\n      axios\n        .get(`https://fakebook-january-derek.herokuapp.com/api/v1/blog`)\n        .then((res) => setPosts(res.data));\n        getMessages()\n    }, [ getMessages ]);\n    useEffect(() => {\n      console.log(firebaseApp)\n    }, [])\n    \n    const values = {\n        posts : posts,\n        messages : messages\n    }\n\n    return (\n        <DataContext.Provider value = { values }>\n            {props.children}\n        </DataContext.Provider>\n    )\n}\n\nexport default DataProvider;"]},"metadata":{},"sourceType":"module"}